# 変数と可変性

[変数と可変性 - The Rust Programming Language 日本語版](https://doc.rust-jp.rs/book-ja/ch03-01-variables-and-mutability.html)

- Rustでは、値が不変であると宣言したら、本当に変わらないことをコンパイラが担保してくれる

## 変数と定数 (constants) の違い

- 定数には `mut` キーワードは使えない
- 定数は値の型を必ず注釈しなければならない
- 定数はどんなスコープでも定義できる
- 定数は定数式にしかセットできない

```rs
const MAX_POINTS: u32 = 100_000;
```

## シャドーイング

- 前に定義した変数と同じ名前の変数を新しく宣言でき、新しい変数は、前の変数を**覆い隠す**

```rs
fn main() {
    let x = 5;
    let x = x + 1;
    let x = x * 2;
    println!("The value of x is: {}", x);
}
```

- シャドーイングは、変数を `mut` にするのとは違う
- `let` キーワードを使わずに変数への代入を試みると、コンパイルエラーが出る
- `let` を使うことで値にちょっとした加工を行えるが、その加工が終わったら変数は不変になる
- `mut` と上書きのもう一つの違いは、再度 `let` キーワードを使用したら、実効的には新しい変数を生成していることになるので、値の型を変えつつ同じ変数名を使い回せること

例：プログラムがユーザーに何らかのテキストに対して空白文字を入力することで何個分のスペースを表示したいかを尋ね、この入力を数値として保持したいとする。

```rs
let spaces = "    ";
let spaces = space.len();
```

この文法要素は許容される。シャドーイングのおかげで異なる名前を付ける必要がなくなる。一方でこの場合に `mut` を使おうとするとコンパイルエラーになる。

```rs
let mut spaces = "    ";
spaces = space.len();
```
